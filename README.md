世界初！NFT対応スピードガンを作ってみよう！
=============

# プロジェクトの概要

市販のスピードガンを改造し、背面ディスプレイの測定結果をカメラで読み取り、  
文字認識、音声読み上げ、そして測定結果のNFT化までをフルオートで実施します。  
3Dプリンター、ラズベリーパイ、ディープラーニング、そしてブロックチェーン。  
話題のテクノロジーをふんだんに使ったロマン溢れるプロジェクトです。

セットアップ手順と使い方
=============

下記ドキュメントを参照  
./docs/setup_windows.md  
./docs/setup_raspberry_pi.md  
./docs/how_to_use.md

メイキング
=============

### モチベーション

新庄BIG BOSSの球界復帰で、かつての球児魂が疼きキャッチボールを始める。  
球速が気になり、スピードガンを入手するが、手で持つ必要があったり、  
毎回画面を覗く必要があるため投球テンポが悪くなる問題がありました。  
そこで全自動ですべてやってくれないかな～。となったのが始まりです。

### スピードガン用マウントベース

まず手で持つ必要をなくすため、スピードガン用のマウントベースを作成し、  
カメラ用の三脚に設置できるようにします。  

Fusion360でモデリング、サイズが大きいため3Dプリンターでは分割出力し、   
瞬間接着剤で部品を接着します。3Dプリンター特有の積層痕は、  
プラスチックパテで穴埋めし、耐水ペーパーで水研磨。  
サーフェイサーで表面処理し、スプレー塗料で着色すれば完成です。  

### ラズベリーパイ

数字認識、音声読み上げ、NFT発行処理、スイッチの制御を行うために使用します。  
fritzingで回路設計し、ブレッドボードでデバッグ、問題がないことを確認できれば、  
ユニバーサル基盤に半田付けします。細かい作業で目の老化を感じます。ルーペがほしい。

### 数字認識

スピードガンのディスプレイに表示される数字を読み取るため、  
当初はOCR(Tesseract)を試験していましたが、精度に問題がありました。  
野外使用環境下で、明暗、映り込み、光の差し込み、文字の滲み、画面の傾きが安定しなかったり、  
白黒ディスプレイで背景と文字のコントラストが曖昧なことが原因です。 

OCRを諦め、いささかリッチすぎる気もしましたがTensorFlowによる機械学習(CNN)を採用しました。  
うまく機能する確信がない中、時間をかけることに躊躇いがありましたが、結果精度上々。  
ラズベリーパイなどのエッジデバイス向けのTensorFlow Liteも問題なく動作(10fps以上)しました。  
モデルの作成と訓練にはPCが必要です。

TensorFlow 2  
https://www.tensorflow.org/overview?hl=ja  
TensorFlow Lite  
https://www.tensorflow.org/lite?hl=ja

### 音声読み上げ

測定結果の音声読み上げにはVOICEVOXを採用しました。  
高負荷ゆえリアルタイム処理には向かないようですが、  
事前エンコードしておくような目的ではベターな印象です。  
違和感のない自然な日本語で、しかもフリーです。  

VOICEVOX\
https://voicevox.hiroshiba.jp/

### NFT

測定結果はフルオンチェーンでSymbolブロックチェーンにNFTとして記録します。  
多くのNFTサービスがファイル参照のみを記録するのみに対して、  
ファイルの実体をブロックチェーンに記録しています。  

Symbol  
https://docs.symbol.dev/